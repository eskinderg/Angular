<!-- <ng-template #popContent> -->
<!--     <strong>Title &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :</strong> -->
<!--     &nbsp; {{ facadeNote?.header ? facadeNote?.header : 'Untitled' }} -->
<!--     <br /> -->
<!--     <strong>Last Modified &nbsp;:</strong> -->
<!--     &nbsp; {{ facadeNote?.date_modified | date: 'medium' }} -->
<!--     <br /> -->
<!--     <strong>Date Created &nbsp; :</strong> -->
<!--     &nbsp; {{ facadeNote?.date_created | date: 'medium' }} -->
<!--     <br /> -->
<!--     <strong>Pinned &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :</strong> -->
<!--     &nbsp; {{ facadeNote?.pinned ? 'Yes' : 'No' }} -->
<!--     <br /> -->
<!--     <strong>Colour &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :</strong> -->
<!--     &nbsp; {{ facadeNote?.colour ? facadeNote?.colour : 'none' }} -->
<!--     <br /> -->
<!--     <strong>Spell Check &nbsp; &nbsp; :</strong> -->
<!--     &nbsp; {{ facadeNote?.spell_check ? 'on' : 'off' }} -->
<!--     <br /> -->
<!--     <strong>Readonly &nbsp; &nbsp; :</strong> -->
<!--     &nbsp; {{ facadeNote?.readonly ? 'yes' : 'no' }} -->
<!--     <br /> -->
<!--     <strong>Owner &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :</strong> -->
<!--     &nbsp; {{ facadeNote?.owner }} -->
<!-- </ng-template> -->
<div class="note-background" [ngClass]="opendNote.colour + '-note'" [class.readonly]="opendNote.readonly">
    <div class="note-menu">
        <div class="note-header">
            <app-note-header-control
                #noteHeader
                [opendNote]="opendNote"
                (noteUpdateNoteHeader)="onNoteHeaderUpdate($event)" />
        </div>

        <div class="menu-icons" [class.readonly-menu]="facadeNote.readonly">
            <div
                appTooltip="Toggle Spell Check"
                [position]="tooltipPosition"
                [class.spell-check-active]="facadeNote.spell_check"
                (click)="onSpellCheckToggle(facadeNote)">
                <app-svg-icon
                    height="25"
                    width="25"
                    [class]="facadeNote.spell_check ? 'spell-check-active' : 'spell-check'"
                    src="assets/images/spell.svg" />
            </div>

            <app-svg-icon
                height="26"
                width="26"
                [class.pinned]="facadeNote.pinned"
                (mouseup)="onTogglePin(facadeNote)"
                class="pin-note-icon"
                src="assets/images/pin.svg" />

            <div class="colour-selector">
                <app-note-colour-selector
                    [note]="facadeNote"
                    #noteColourSelector
                    (noteColourUpdate)="onNoteColourUpdate($event)"
                    class="menu-icon" />
            </div>

            <div class="trash-icon menu-icon" (click)="onNoteArchive(opendNote)">
                <app-svg-icon height="30" width="30" src="assets/images/archive.svg" />
            </div>

            <div class="">
                <!-- @if (facadeNote.readonly) { -->
                <app-svg-icon
                    [class.svg-readonly]="facadeNote.readonly"
                    (mouseUp)="onToggleReadonly(facadeNote)"
                    class="readonly-svg"
                    height="30"
                    width="30"
                    src="assets/images/lock.svg" />
                <!-- } @else { -->
                <!-- <app-svg-icon -->
                <!--     [fill]="'grey'" -->
                <!--     (mouseUp)="onToggleReadonly(facadeNote)" -->
                <!--     height="30" -->
                <!--     width="30" -->
                <!--     src="assets/images/lock.svg" /> -->
                <!-- } -->
            </div>

            <div class="info-icon menu-icon popover-content" (click)="noteInfoClick(facadeNote)">
                <app-svg-icon height="25" width="25" src="assets/images/info.svg" />
            </div>
        </div>
    </div>

    @if (opendNote) {
        <app-textarea-expanded
            [opendNote]="opendNote"
            [facadeNote]="facadeNote"
            #textAreaExpanded
            (textAreaSelectionChange)="ontextAreaSelectionChange($event)"
            (textAreaTextChanged)="ontextAreaTextChanged($event)" />
    }

    <div class="info" (click)="noteInfoClick(facadeNote)">
        <div class="wc">
            <strong>Word Count:</strong>
            {{ getCount(facadeNote, 'word') }}
        </div>
        |
        <!-- <div class="wc"><strong>Line Count: </strong>{{ getCount(facadeNote, 'line') }}</div> | -->
        <div class="wc">
            <strong>Spell Check:</strong>
            {{ facadeNote?.spell_check ? 'on' : 'off' }}
        </div>
    </div>
</div>
