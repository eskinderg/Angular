<ng-template #popContent>
    Title &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : &nbsp;
    {{ facadeNote?.header ? facadeNote?.header : 'Untitled' }}<br />
    Last Modified &nbsp;: &nbsp; {{ facadeNote?.dateModified | date: 'medium' }}<br />
    Date Created &nbsp; : &nbsp; {{ facadeNote?.dateCreated | date: 'medium' }}<br />
    Pinned &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : &nbsp; {{ facadeNote?.pinned ? 'Yes' : 'No' }}<br />
    Colour &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : &nbsp;
    {{ facadeNote?.colour ? facadeNote?.colour : 'none' }}<br />
    Spell Check &nbsp; &nbsp; : &nbsp; {{ facadeNote?.spellCheck ? 'on' : 'off' }}<br />
    Owner &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : &nbsp; {{ facadeNote?.owner }}
</ng-template>
<div class="note-background" [ngClass]="note.colour + '-note'">
    <div class="note-menu">
        <div class="note-header">
            <app-note-header-control
                #noteHeader
                [note]="facadeNote"
                (noteUpdateNoteHeader)="handleNoteHeaderUpdate($event)">
            </app-note-header-control>
        </div>

        <div class="menu-icons">
            <div
                class="spell-check"
                appTooltip="Toggle Spell Check"
                [position]="tooltipPosition"
                [ngClass]="{ 'spell-check-active': facadeNote.spellCheck }"
                (click)="spellCheckToggle(facadeNote)">
                <svg
                    width="1.75rem"
                    height="1.75rem"
                    viewBox="0 0 16 16"
                    class="bi bi-spellcheck"
                    fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        fill-rule="evenodd"
                        d="M8.217 11.068c1.216 0 1.948-.869 1.948-2.31v-.702c0-1.44-.727-2.305-1.929-2.305-.742 0-1.328.347-1.499.889h-.063V3.983h-1.29V11h1.27v-.791h.064c.21.532.776.86 1.499.86zm-.43-1.025c-.66 0-1.113-.518-1.113-1.28V8.12c0-.825.42-1.343 1.098-1.343.684 0 1.075.518 1.075 1.416v.45c0 .888-.386 1.401-1.06 1.401zm-5.583 1.035c.767 0 1.201-.356 1.406-.737h.059V11h1.216V7.519c0-1.314-.947-1.783-2.11-1.783C1.355 5.736.75 6.42.69 7.27h1.216c.064-.323.313-.552.84-.552.527 0 .864.249.864.771v.464H2.346C1.145 7.953.5 8.568.5 9.496c0 .977.693 1.582 1.704 1.582zm.42-.947c-.44 0-.845-.235-.845-.718 0-.395.269-.684.84-.684h.991v.538c0 .503-.444.864-.986.864zm8.897.567c-.577-.4-.9-1.088-.9-1.983v-.65c0-1.42.894-2.338 2.305-2.338 1.352 0 2.119.82 2.139 1.806h-1.187c-.04-.351-.283-.776-.918-.776-.674 0-1.045.517-1.045 1.328v.625c0 .468.121.834.343 1.067l-.737.92z" />
                    <path
                        fill-rule="evenodd"
                        d="M14.469 9.414a.75.75 0 0 1 .117 1.055l-4 5a.75.75 0 0 1-1.116.061l-2.5-2.5a.75.75 0 1 1 1.06-1.06l1.908 1.907 3.476-4.346a.75.75 0 0 1 1.055-.117z" />
                </svg>
            </div>

            <app-note-colour-selector
                #noteColourSelector
                (noteColourUpdate)="handleNoteColourUpdate($event)"
                class="menu-icon"></app-note-colour-selector>

            <div class="trash-icon menu-icon" (click)="noteArchive_click(note)">
                <svg
                    id="svg6"
                    width="1.75rem"
                    height="1.75rem"
                    version="1.1"
                    viewBox="0 0 16 16"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        id="path2"
                        d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z" />
                    <path
                        d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z" />
                </svg>
            </div>

            <div
                class="info-icon menu-icon popover-content"
                placement="auto"
                [appPopover]="popContent"
                popoverTitle="Info">
                <svg
                    version="1.1"
                    id="Capa_1"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="1.75rem"
                    height="1.75rem"
                    viewBox="0 0 416.979 416.979"
                    xml:space="preserve">
                    <g>
                        <path
                            d="M356.004,61.156c-81.37-81.47-213.377-81.551-294.848-0.182c-81.47,81.371-81.552,213.379-0.181,294.85
		c81.369,81.47,213.378,81.551,294.849,0.181C437.293,274.636,437.375,142.626,356.004,61.156z M237.6,340.786
		c0,3.217-2.607,5.822-5.822,5.822h-46.576c-3.215,0-5.822-2.605-5.822-5.822V167.885c0-3.217,2.607-5.822,5.822-5.822h46.576
		c3.215,0,5.822,2.604,5.822,5.822V340.786z M208.49,137.901c-18.618,0-33.766-15.146-33.766-33.765
		c0-18.617,15.147-33.766,33.766-33.766c18.619,0,33.766,15.148,33.766,33.766C242.256,122.755,227.107,137.901,208.49,137.901z" />
                    </g>
                </svg>
            </div>
        </div>
    </div>

    @if (note) {
        <app-textarea-expanded
            [note]="note"
            [facadeNote]="facadeNote"
            #textAreaExpanded
            (textAreaSelectionChange)="selectionChange($event)"
            (textAreaTextChanged)="handleNoteTextUpdate($event)"
            (textAreaUpdatedOpendNote)="onUpdatOpendNote($event)">
        </app-textarea-expanded>
    }
</div>
